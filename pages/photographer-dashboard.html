<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapSelect - Photographer Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/variables.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/user-menu.css">
    <link rel="stylesheet" href="../assets/css/animations.css">
    <link rel="stylesheet" href="../assets/css/features.css">
    <link rel="stylesheet" href="../assets/css/payment.css">
    
    <!-- Razorpay Checkout JS -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
    <!-- Authentication Check Overlay (shown if not authenticated) -->
    <div id="authCheckOverlay" class="auth-check-overlay">
        <div class="auth-check-content">
            <i class="fas fa-lock auth-icon"></i>
            <h2>Authentication Required</h2>
            <p>Please log in to access your dashboard.</p>
            <a href="studiopanel-login.html" class="btn">Log In</a>
        </div>
    </div>

    <!-- Navigation Header -->
    <header>
        <div class="container">
            <nav>
                <a href="../index.html" class="logo">
                    <div class="logo-text">SnapSelect</div>
                </a>
                <ul class="nav-links">
                    <li><a href="../index.html#features">Features</a></li>
                    <li><a href="../index.html#how-it-works">How It Works</a></li>
                    <li><a href="../index.html#pricing">Pricing</a></li>
                </ul>
                <div class="right-nav">
                    <!-- User logged in - show user menu with logout -->
                    <div class="notification-bell">
                        <button class="notification-btn" id="notificationBtn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notificationCount">0</span>
                        </button>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <button id="markAllReadBtn" class="mark-read-btn">Mark all read</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <!-- Notifications will be populated dynamically -->
                                <div class="empty-notification">No new notifications</div>
                            </div>
                        </div>
                    </div>

                    <div class="auth-user" id="userNav">
                        <div class="user-menu">
                            <button class="user-menu-btn" id="userMenuBtn">
                                <div class="avatar-placeholder">U</div>
                                <span class="user-name" id="userName">User</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>

                            <div class="user-dropdown" id="userDropdown">
                                <a href="photographer-dashboard.html" class="active">Dashboard</a>
                                <a href="analytics.html">Analytics</a>
                                <a href="account-settings.html">Account Settings</a>
                                <a href="#" id="logoutBtn">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hamburger">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Dashboard Content -->
    <main class="dashboard-main">
        <div class="container">
            <!-- Dashboard Header with Stats Overview -->
            <section class="dashboard-header">
                <div class="dashboard-title">
                    <h1>Photographer Dashboard</h1>
                    <p>Manage your client galleries and selections</p>
                </div>
                <div class="dashboard-stats">
                    <div class="stat-card animate-in">
                        <div class="stat-icon">
                            <i class="fas fa-images"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="activeGalleriesCount">0</span>
                            <span class="stat-label">Active Galleries</span>
                        </div>
                    </div>
                    <div class="stat-card animate-in" style="animation-delay: 0.1s;">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="pendingSelectionsCount">0</span>
                            <span class="stat-label">Pending Selections</span>
                        </div>
                    </div>
                    <div class="stat-card animate-in" style="animation-delay: 0.2s;">
                        <div class="stat-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="storageUsed">0 MB</span>
                            <span class="stat-label">Storage Used</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Plan Information Section -->
            <section class="plan-info animate-in" style="animation-delay: 0.25s;">
                <div class="plan-card">
                    <div class="plan-header">
                        <h3>Current Plan: <span id="currentPlanName">Free</span></h3>
                        <span class="plan-badge" id="planBadge">Free</span>
                    </div>
                    <div class="plan-details">
                        <div class="plan-usage">
                            <div class="usage-item">
                                <span class="usage-label">Storage:</span>
                                <div class="usage-bar">
                                    <div class="usage-progress" id="storageUsageBar"></div>
                                </div>
                                <span class="usage-text" id="storageUsageText">0/1 GB</span>
                            </div>
                            <div class="usage-item">
                                <span class="usage-label">Galleries:</span>
                                <div class="usage-bar">
                                    <div class="usage-progress" id="galleryUsageBar"></div>
                                </div>
                                <span class="usage-text" id="galleryUsageText">0/3</span>
                            </div>
                        </div>
                        <button id="upgradePlanBtn" class="btn upgrade-btn">Upgrade Plan</button>
                    </div>
                </div>
            </section>

            <!-- Quick Actions Bar -->
            <section class="quick-actions animate-in" style="animation-delay: 0.3s;">
                <button id="createGalleryBtn" class="action-btn primary">
                    <i class="fas fa-plus"></i> New Gallery
                </button>
                <button id="viewSelectionsBtn" class="action-btn">
                    <i class="fas fa-check"></i> View Selections
                </button>
                <button id="downloadSelectedBtn" class="action-btn">
                    <i class="fas fa-download"></i> Download Selected
                </button>
                <button id="viewAnalyticsBtn" class="action-btn">
                    <i class="fas fa-chart-bar"></i> Analytics
                </button>
                <button id="helpBtn" class="action-btn help">
                    <i class="fas fa-question-circle"></i> Help
                </button>
            </section>

            <!-- Gallery Management Section -->
            <section class="galleries-section animate-in" style="animation-delay: 0.4s;">
                <div class="section-header">
                    <h2>Client Galleries</h2>
                    <div class="view-controls">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                        <div class="search-container">
                            <input type="text" id="gallerySearch" placeholder="Search galleries..." class="search-input">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>
                </div>

                <!-- Empty State (shown when no galleries exist) -->
                <div id="emptyGalleryState" class="empty-state">
                    <i class="fas fa-images empty-gallery-icon"></i>
                    <h3>No Galleries Yet</h3>
                    <p>Create your first client gallery to get started</p>
                    <button class="btn" id="emptyStateCreateBtn">Create Gallery</button>
                </div>

                <!-- Gallery Grid View (default) -->
                <div id="galleryGrid" class="gallery-grid">
                    <!-- Gallery cards will be populated dynamically -->
                    <!-- Example Gallery Card (will be generated via JS) -->
                    <div class="gallery-card sample-card">
                        <div class="gallery-thumbnail">
                            <div class="gallery-image-placeholder">
                                <i class="fas fa-image"></i>
                            </div>
                            <div class="gallery-status pending">Selection in Progress</div>
                        </div>
                        <div class="gallery-info">
                            <h3 class="gallery-title">Johnson Wedding</h3>
                            <div class="gallery-meta">
                                <span><i class="fas fa-calendar"></i> Apr 18, 2025</span>
                                <span><i class="fas fa-image"></i> 248 photos</span>
                            </div>
                            <div class="selection-progress">
                                <div class="progress-label">
                                    <span>Client Selection: 24/50</span>
                                    <span>48%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 48%"></div>
                                </div>
                            </div>
                            <div class="gallery-actions">
                                <button class="action-icon" title="View Gallery">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-icon" title="Share with Client">
                                    <i class="fas fa-share-alt"></i>
                                </button>
                                <button class="action-icon" title="Download Selections">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="action-icon" title="Delete Gallery">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery List View (hidden by default) -->
                <div id="galleryList" class="gallery-list">
                    <table class="gallery-table">
                        <thead>
                            <tr>
                                <th>Gallery Name</th>
                                <th>Created</th>
                                <th>Status</th>
                                <th>Photos</th>
                                <th>Selected</th>
                                <th>Expires</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="galleryTableBody">
                            <!-- Gallery rows will be populated dynamically -->
                            <!-- Example row (will be generated via JS) -->
                            <tr class="sample-row">
                                <td class="gallery-name">Johnson Wedding</td>
                                <td>Apr 18, 2025</td>
                                <td><span class="status-badge pending">Selection in Progress</span></td>
                                <td>248</td>
                                <td>24/50</td>
                                <td>May 18, 2025</td>
                                <td class="table-actions">
                                    <button class="action-icon" title="View Gallery">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-icon" title="Share with Client">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                    <button class="action-icon" title="Download Selections">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="action-icon" title="Delete Gallery">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Plan Upgrade Modal -->
            <div id="upgradePlanModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Upgrade Your Plan</h2>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="plan-comparison">
                            <div class="plan-tabs">
                                <button class="plan-tab" data-plan="basic">Basic</button>
                                <button class="plan-tab" data-plan="pro">Pro</button>
                            </div>
                            
                            <div id="planDetailsSection" class="current-vs-selected">
                                <div class="plan-column current">
                                    <h3>Current Plan</h3>
                                    <div class="plan-name" id="currentPlanDisplay">Free</div>
                                    <div class="plan-price" id="currentPlanPrice">₹0/month</div>
                                    <ul class="plan-features" id="currentPlanFeatures">
                                        <li>1 GB Storage</li>
                                        <li>3 Galleries</li>
                                        <li>50 Photos per gallery</li>
                                        <li>3-day client selection window</li>
                                    </ul>
                                </div>
                                <div class="plan-column selected">
                                    <h3>Selected Plan</h3>
                                    <div class="plan-name" id="selectedPlanName">Basic</div>
                                    <div class="plan-price" id="selectedPlanPrice">₹499</div>
                                    <ul class="plan-features" id="planFeaturesList">
                                        <li>15 GB Storage</li>
                                        <li>10 Galleries</li>
                                        <li>500 Photos per gallery</li>
                                        <li>30-day client selection window</li>
                                        <li>Advanced uploads</li>
                                        <li>Password protection</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="payment-section">
                                <!-- Payment success/error messages will be inserted here -->
                                <div class="payment-success alert-success"></div>
                                <div class="payment-error alert-danger"></div>
                                
                                <h3>Complete Your Upgrade</h3>
                                <p class="payment-info">Click the button below to proceed securely with Razorpay.</p>
                                
                                <form id="paymentForm">
                                    <div class="payment-options">
                                        <div class="payment-option">
                                            <div class="payment-logo-icon">
                                                <i class="fas fa-credit-card"></i>
                                            </div>
                                            <div class="payment-description">
                                                <p>Secure payment via Razorpay</p>
                                                <div class="payment-methods">
                                                    <i class="fas fa-credit-card"></i>
                                                    <i class="fas fa-university"></i>
                                                    <i class="fab fa-cc-visa"></i>
                                                    <i class="fab fa-cc-mastercard"></i>
                                                    <i class="fab fa-google-pay"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="button" class="btn secondary" id="cancelUpgradeBtn">Cancel</button>
                                        <button type="submit" class="btn primary" id="confirmUpgradeBtn">Upgrade Now</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="container">
            <div class="footer-bottom">
                <p class="copyright">&copy; 2025 SnapSelect. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#" id="footerHelpLink">Help Center</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-functions-compat.js"></script>
    
    <!-- Application Scripts -->
    <script src="../assets/js/firebase-config.js"></script>
    <script src="../assets/js/firebase-auth.js"></script>
    <script src="../assets/js/firebase-db.js"></script>
    <script src="../assets/js/header-auth.js"></script>
    <script src="../assets/js/dashboard.js"></script>
</body>
</html>
