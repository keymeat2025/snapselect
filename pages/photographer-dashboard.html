<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapSelect - Photographer Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/variables.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/user-menu.css">
    <link rel="stylesheet" href="../assets/css/animations.css">
</head>
<body>
    <!-- Authentication Check Overlay (shown if not authenticated) -->
    <div id="authCheckOverlay" class="auth-check-overlay">
        <div class="auth-check-content">
            <i class="fas fa-lock auth-icon"></i>
            <h2>Authentication Required</h2>
            <p>Please log in to access your dashboard.</p>
            <a href="studiopanel-login.html" class="btn">Log In</a>
        </div>
    </div>

    <!-- Navigation Header (Same as index but with active state for dashboard) -->
    <header>
        <div class="container">
            <nav>
                <a href="../index.html" class="logo">
                    <img src="../assets/images/snapselect-logo.png" alt="SnapSelect" class="logo-image">
                </a>
                <ul class="nav-links">
                    <li><a href="../index.html#features">Features</a></li>
                    <li><a href="../index.html#how-it-works">How It Works</a></li>
                    <li><a href="../index.html#pricing">Pricing</a></li>
                </ul>
                <div class="right-nav">
                    <!-- User logged in - show user menu with logout -->
                    <div class="notification-bell">
                        <button class="notification-btn" id="notificationBtn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notificationCount">0</span>
                        </button>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <button id="markAllReadBtn" class="mark-read-btn">Mark all read</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <!-- Notifications will be populated dynamically -->
                                <div class="empty-notification">No new notifications</div>
                            </div>
                        </div>
                    </div>

                    <div class="auth-user" id="userNav">
                        <div class="user-menu">
                            <button class="user-menu-btn" id="userMenuBtn">
                                <img src="../assets/images/placeholder-avatar.jpg" id="userAvatar" class="user-avatar" alt="User">
                                <span class="user-name" id="userName">User</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>

                            <div class="user-dropdown" id="userDropdown">
                                <a href="photographer-dashboard.html" class="active">Dashboard</a>
                                <a href="account-settings.html">Account Settings</a>
                                <a href="#" id="logoutBtn">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hamburger">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Dashboard Content -->
    <main class="dashboard-main">
        <div class="container">
            <!-- Dashboard Header with Stats Overview -->
            <section class="dashboard-header">
                <div class="dashboard-title">
                    <h1>Photographer Dashboard</h1>
                    <p>Manage your client galleries and selections</p>
                </div>
                <div class="dashboard-stats">
                    <div class="stat-card animate-in">
                        <div class="stat-icon">
                            <i class="fas fa-images"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="activeGalleriesCount">0</span>
                            <span class="stat-label">Active Galleries</span>
                        </div>
                    </div>
                    <div class="stat-card animate-in" style="animation-delay: 0.1s;">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="pendingSelectionsCount">0</span>
                            <span class="stat-label">Pending Selections</span>
                        </div>
                    </div>
                    <div class="stat-card animate-in" style="animation-delay: 0.2s;">
                        <div class="stat-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="storageUsed">0 MB</span>
                            <span class="stat-label">Storage Used</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions Bar -->
            <section class="quick-actions animate-in" style="animation-delay: 0.3s;">
                <button id="createGalleryBtn" class="action-btn primary">
                    <i class="fas fa-plus"></i> New Gallery
                </button>
                <button id="viewSelectionsBtn" class="action-btn">
                    <i class="fas fa-check"></i> View Selections
                </button>
                <button id="downloadSelectedBtn" class="action-btn">
                    <i class="fas fa-download"></i> Download Selected
                </button>
                <button id="helpBtn" class="action-btn help">
                    <i class="fas fa-question-circle"></i> Help
                </button>
            </section>

            <!-- Gallery Management Section -->
            <section class="galleries-section animate-in" style="animation-delay: 0.4s;">
                <div class="section-header">
                    <h2>Client Galleries</h2>
                    <div class="view-controls">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                        <div class="search-container">
                            <input type="text" id="gallerySearch" placeholder="Search galleries..." class="search-input">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>
                </div>

                <!-- Empty State (shown when no galleries exist) -->
                <div id="emptyGalleryState" class="empty-state">
                    <img src="../assets/images/empty-gallery.svg" alt="No galleries" class="empty-icon">
                    <h3>No Galleries Yet</h3>
                    <p>Create your first client gallery to get started</p>
                    <button class="btn" id="emptyStateCreateBtn">Create Gallery</button>
                </div>

                <!-- Gallery Grid View (default) -->
                <div id="galleryGrid" class="gallery-grid">
                    <!-- Gallery cards will be populated dynamically -->
                    <!-- Example Gallery Card (will be generated via JS) -->
                    <div class="gallery-card sample-card">
                        <div class="gallery-thumbnail">
                            <img src="../assets/images/gallery-placeholder.jpg" alt="Gallery thumbnail">
                            <div class="gallery-status pending">Selection in Progress</div>
                        </div>
                        <div class="gallery-info">
                            <h3 class="gallery-title">Johnson Wedding</h3>
                            <div class="gallery-meta">
                                <span><i class="fas fa-calendar"></i> Apr 18, 2025</span>
                                <span><i class="fas fa-image"></i> 248 photos</span>
                            </div>
                            <div class="selection-progress">
                                <div class="progress-label">
                                    <span>Client Selection: 24/50</span>
                                    <span>48%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 48%"></div>
                                </div>
                            </div>
                            <div class="gallery-actions">
                                <button class="action-icon" title="View Gallery">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-icon" title="Share with Client">
                                    <i class="fas fa-share-alt"></i>
                                </button>
                                <button class="action-icon" title="Download Selections">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="action-icon" title="Delete Gallery">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery List View (hidden by default) -->
                <div id="galleryList" class="gallery-list" style="display: none;">
                    <table class="gallery-table">
                        <thead>
                            <tr>
                                <th>Gallery Name</th>
                                <th>Created</th>
                                <th>Status</th>
                                <th>Photos</th>
                                <th>Selected</th>
                                <th>Expires</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="galleryTableBody">
                            <!-- Gallery rows will be populated dynamically -->
                            <!-- Example row (will be generated via JS) -->
                            <tr class="sample-row">
                                <td class="gallery-name">Johnson Wedding</td>
                                <td>Apr 18, 2025</td>
                                <td><span class="status-badge pending">Selection in Progress</span></td>
                                <td>248</td>
                                <td>24/50</td>
                                <td>May 18, 2025</td>
                                <td class="table-actions">
                                    <button class="action-icon" title="View Gallery">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-icon" title="Share with Client">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                    <button class="action-icon" title="Download Selections">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="action-icon" title="Delete Gallery">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Create Gallery Modal -->
           
            <div id="createGalleryModal" class="modal">
              <div class="modal-content">
                <span class="close-modal">&times;</span>
                <div class="modal-steps">
                  <div class="step active" data-step="1">1. Choose Plan</div>
                  <div class="step" data-step="2">2. Gallery Details</div>
                  <div class="step" data-step="3">3. Payment</div>
                  <div class="step" data-step="4">4. Upload Photos</div>
                </div>
                
                <!-- Step 1: Plan Selection -->
                <div class="modal-step-content active" id="step1">
                  <h2>Select a Plan</h2>
                  <div class="plans-container">
                    <div class="plan-card" data-plan="lite">
                      <h3>Lite</h3>
                      <div class="price">₹79/client</div>
                      <ul class="plan-features">
                        <li>Up to 100 photos</li>
                        <li>2GB storage</li>
                        <li>7 days selection window</li>
                      </ul>
                      <button class="btn btn-select-plan" data-plan="lite" data-price="79">Select</button>
                    </div>
                    
                    <div class="plan-card" data-plan="mini">
                      <h3>Mini</h3>
                      <div class="price">₹149/client</div>
                      <ul class="plan-features">
                        <li>Up to 200 photos</li>
                        <li>5GB storage</li>
                        <li>14 days selection window</li>
                      </ul>
                      <button class="btn btn-select-plan" data-plan="mini" data-price="149">Select</button>
                    </div>
                    
                    <div class="plan-card recommended" data-plan="basic">
                      <div class="recommended-badge">Popular</div>
                      <h3>Basic</h3>
                      <div class="price">₹399/client</div>
                      <ul class="plan-features">
                        <li>Up to 500 photos</li>
                        <li>15GB storage</li>
                        <li>30 days selection window</li>
                        <li>Custom branding</li>
                      </ul>
                      <button class="btn btn-select-plan" data-plan="basic" data-price="399">Select</button>
                    </div>
                    
                    <div class="plan-card" data-plan="pro">
                      <h3>Pro</h3>
                      <div class="price">₹799/client</div>
                      <ul class="plan-features">
                        <li>Up to 800 photos</li>
                        <li>25GB storage</li>
                        <li>45 days selection window</li>
                        <li>Client comments</li>
                      </ul>
                      <button class="btn btn-select-plan" data-plan="pro" data-price="799">Select</button>
                    </div>
                  </div>
                  
                  <div class="more-plans">
                    <a href="#" id="showMorePlans">View Premium and Ultimate plans</a> or 
                    <a href="/comparison.html" target="_blank">See full comparison</a>
                  </div>
                  
                  <div class="plan-details-extra" id="premiumPlans" style="display: none;">
                    <div class="plan-card" data-plan="premium">
                      <h3>Premium</h3>
                      <div class="price">₹1,499/client</div>
                      <ul class="plan-features">
                        <li>Up to 1,200 photos</li>
                        <li>50GB storage</li>
                        <li>60 days selection window</li>
                        <li>Complete customization</li>
                        <li>Priority support</li>
                      </ul>
                      <button class="btn btn-select-plan" data-plan="premium" data-price="1499">Select</button>
                    </div>
                    
                    <div class="plan-card" data-plan="ultimate">
                      <h3>Ultimate</h3>
                      <div class="price">₹2,999/client</div>
                      <ul class="plan-features">
                        <li>Up to 2,500 photos</li>
                        <li>100GB storage</li>
                        <li>90 days selection window</li>
                        <li>White-label service</li>
                        <li>Priority phone support</li>
                      </ul>
                      <button class="btn btn-select-plan" data-plan="ultimate" data-price="2999">Select</button>
                    </div>
                  </div>
                </div>
                
                <!-- Step 2: Gallery Details -->
                <div class="modal-step-content" id="step2">
                  <h2>Gallery Details</h2>
                  <form id="galleryDetailsForm">
                    <div class="form-group">
                      <label for="galleryName">Gallery Name*</label>
                      <input type="text" id="galleryName" required placeholder="e.g., Smith Wedding">
                    </div>
                    <div class="form-group">
                      <label for="clientEmail">Client Email (optional)</label>
                      <input type="email" id="clientEmail" placeholder="client@example.com">
                    </div>
                    <div class="form-group">
                      <label for="galleryExpiry">Gallery Expiry</label>
                      <div class="expiry-info">Based on selected plan: <span id="expiryDate">30 days</span></div>
                    </div>
                    <div class="form-group">
                      <label for="selectedPlan">Selected Plan</label>
                      <div class="selected-plan-info">
                        <span id="selectedPlanName">Basic</span> - 
                        <span id="selectedPlanPrice">₹399</span>
                        <a href="#" id="changePlan">(Change)</a>
                      </div>
                    </div>
                    <div class="buttons-row">
                      <button type="button" class="btn btn-secondary back-btn">Back</button>
                      <button type="button" class="btn btn-primary continue-btn">Continue to Payment</button>
                    </div>
                  </form>
                </div>
                
                <!-- Step 3: Payment -->
                <div class="modal-step-content" id="step3">
                  <h2>Payment</h2>
                  <div class="payment-summary">
                    <h3>Order Summary</h3>
                    <div class="summary-line">
                      <span>Plan:</span>
                      <span id="summaryPlanName">Basic</span>
                    </div>
                    <div class="summary-line">
                      <span>Gallery:</span>
                      <span id="summaryGalleryName">Smith Wedding</span>
                    </div>
                    <div class="summary-line total">
                      <span>Total:</span>
                      <span id="summaryTotal">₹399</span>
                    </div>
                  </div>
                  
                  <form id="paymentForm">
                    <h3>Payment Method</h3>
                    <div class="saved-payments" id="savedPaymentMethods">
                      <div class="saved-payment-method">
                        <input type="radio" name="paymentMethod" id="savedCard1" value="savedCard1" checked>
                        <label for="savedCard1">
                          <i class="fas fa-credit-card"></i> XXXX XXXX XXXX 4242 (expires 12/25)
                        </label>
                      </div>
                    </div>
                    
                    <div class="add-new-payment">
                      <input type="radio" name="paymentMethod" id="newCard" value="newCard">
                      <label for="newCard">Add new payment method</label>
                      
                      <div class="new-card-form" id="newCardForm" style="display: none;">
                        <div class="form-group">
                          <label for="cardNumber">Card Number</label>
                          <input type="text" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX">
                        </div>
                        <div class="form-row">
                          <div class="form-group half">
                            <label for="expiryDate">Expiry Date</label>
                            <input type="text" id="expiryDate" placeholder="MM/YY">
                          </div>
                          <div class="form-group half">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" placeholder="XXX">
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="nameOnCard">Name on Card</label>
                          <input type="text" id="nameOnCard">
                        </div>
                      </div>
                    </div>
                    
                    <div class="coupon-section">
                      <div class="coupon-toggle">
                        <a href="#" id="showCouponField">Have a coupon code?</a>
                      </div>
                      <div class="coupon-field" id="couponField" style="display: none;">
                        <div class="form-group">
                          <input type="text" id="couponCode" placeholder="Enter coupon code">
                          <button type="button" class="btn btn-small" id="applyCoupon">Apply</button>
                        </div>
                      </div>
                    </div>
                    
                    <div class="buttons-row">
                      <button type="button" class="btn btn-secondary back-btn">Back</button>
                      <button type="button" class="btn btn-primary" id="makePayment">Complete Payment</button>
                    </div>
                  </form>
                </div>
                
                <!-- Step 4: Success -->
                <div class="modal-step-content" id="step4">
                  <div class="success-message">
                    <i class="fas fa-check-circle"></i>
                    <h2>Payment Successful!</h2>
                    <p>Your gallery has been created and is ready for photo uploads.</p>
                  </div>
                  
                  <div class="upload-instructions">
                    <h3>Next: Upload Photos</h3>
                    <p>You can upload up to <span id="photoLimit">500</span> photos to this gallery.</p>
                  </div>
                  
                  <div class="buttons-row">
                    <button type="button" class="btn btn-secondary" id="backToDashboard">Back to Dashboard</button>
                    <button type="button" class="btn btn-primary" id="startUpload">Upload Photos Now</button>
                  </div>
                </div>
              </div>
            </div>
            <!-- Help Modal -->
            <div id="helpModal" class="modal">
                <div class="modal-content help-content">
                    <div class="modal-header">
                        <h2>Dashboard Help</h2>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="help-tabs">
                            <button class="help-tab active" data-tab="galleries">Galleries</button>
                            <button class="help-tab" data-tab="uploads">Uploading</button>
                            <button class="help-tab" data-tab="sharing">Client Sharing</button>
                            <button class="help-tab" data-tab="selections">Selections</button>
                        </div>
                        <div class="help-content">
                            <div class="help-panel active" id="galleries-help">
                                <h3>Managing Your Galleries</h3>
                                <p>Galleries are collections of photos you share with clients for selection. Each gallery can have its own settings and sharing options.</p>
                                <div class="help-steps">
                                    <div class="help-step">
                                        <div class="step-number">1</div>
                                        <div class="step-content">
                                            <h4>Create a Gallery</h4>
                                            <p>Click the "New Gallery" button to create a new client gallery.</p>
                                        </div>
                                    </div>
                                    <div class="help-step">
                                        <div class="step-number">2</div>
                                        <div class="step-content">
                                            <h4>Upload Photos</h4>
                                            <p>Add photos to your gallery using the upload feature.</p>
                                        </div>
                                    </div>
                                    <div class="help-step">
                                        <div class="step-number">3</div>
                                        <div class="step-content">
                                            <h4>Share with Clients</h4>
                                            <p>Generate a sharing link to send to your clients.</p>
                                        </div>
                                    </div>
                                    <div class="help-step">
                                        <div class="step-number">4</div>
                                        <div class="step-content">
                                            <h4>Monitor Selections</h4>
                                            <p>Track which photos your client has selected.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="help-panel" id="uploads-help" style="display: none;">
                                <h3>Uploading Photos</h3>
                                <p>You can upload photos to your galleries in several convenient ways.</p>
                                <div class="help-card">
                                    <h4><i class="fas fa-cloud-upload-alt"></i> Drag and Drop</h4>
                                    <p>Simply drag files from your computer and drop them onto the upload zone.</p>
                                </div>
                                <div class="help-card">
                                    <h4><i class="fas fa-folder-open"></i> Browse Files</h4>
                                    <p>Click the "Browse Files" button to select photos from your device.</p>
                                </div>
                                <div class="help-note">
                                    <p><strong>Note:</strong> Supported formats include JPG, PNG, and HEIF. Maximum file size depends on your current plan.</p>
                                </div>
                            </div>

                            <div class="help-panel" id="sharing-help" style="display: none;">
                                <h3>Sharing with Clients</h3>
                                <p>Make it easy for clients to view and select their favorite photos.</p>
                                <div class="help-card">
                                    <h4><i class="fas fa-link"></i> Sharing Links</h4>
                                    <p>Each gallery has a unique sharing link you can send to clients.</p>
                                </div>
                                <div class="help-card">
                                    <h4><i class="fas fa-shield-alt"></i> Password Protection</h4>
                                    <p>Add an optional password to control access to the gallery.</p>
                                </div>
                                <div class="help-card">
                                    <h4><i class="fas fa-clock"></i> Expiration Dates</h4>
                                    <p>Set a deadline for client selections to keep your workflow moving.</p>
                                </div>
                            </div>

                            <div class="help-panel" id="selections-help" style="display: none;">
                                <h3>Managing Selections</h3>
                                <p>Once clients have made their selections, you can easily download and process them.</p>
                                <div class="help-card">
                                    <h4><i class="fas fa-bell"></i> Selection Notifications</h4>
                                    <p>Receive notifications when clients make or complete their selections.</p>
                                </div>
                                <div class="help-card">
                                    <h4><i class="fas fa-download"></i> Downloading Selected Photos</h4>
                                    <p>Download all selected photos in a single batch for convenient editing.</p>
                                </div>
                                <div class="help-card">
                                    <h4><i class="fas fa-chart-bar"></i> Selection Statistics</h4>
                                    <p>View statistics about which photos are most popular with your clients.</p>
                                </div>
                            </div>
                        </div>
                        <div class="help-contact">
                            <p>Need more help? <a href="#" id="contactSupportBtn">Contact Support</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer - Simplified version for dashboard -->
    <footer class="dashboard-footer">
        <div class="container">
            <div class="footer-bottom">
                <p class="copyright">&copy; 2025 SnapSelect. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#" id="footerHelpLink">Help Center</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <!-- Your Firebase configuration and modules -->
    <script src="../assets/js/firebase-config.js"></script>
    <script src="../assets/js/firebase-auth.js"></script>
    <script src="../assets/js/firebase-db.js"></script>
    <script src="../assets/js/firebase-storage.js"></script>
    
    <!-- Dashboard specific JavaScript -->
    <script src="../assets/js/dashboard.js"></script>
    <script src="../assets/js/dashboard-auth.js"></script>
    <script src="../assets/js/gallery-manager.js"></script>
    <script src="../assets/js/uploader.js"></script>
    <script src="../assets/js/notifications.js"></script>
</body>
</html>
